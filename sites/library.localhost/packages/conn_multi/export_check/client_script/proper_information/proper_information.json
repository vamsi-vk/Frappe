{
 "creation": "2024-06-12 16:02:47.831152",
 "docstatus": 0,
 "doctype": "Client Script",
 "dt": "Policy",
 "enabled": 1,
 "idx": 0,
 "modified": "2024-06-12 16:02:47.831152",
 "modified_by": "Administrator",
 "module": "Export Check",
 "name": "Proper-Information",
 "owner": "Administrator",
 "script": "frappe.ui.form.on('Policy', {\n\tproposer_full_name:function(frm) {\n\t\tconst address = frm.doc.primary_address;\n\t\tconst result = extractContactInfo(address);\n\t\tfrm.set_value('phone_no',result.phone);\n\t\tfrm.set_value('fax_no',result.fax);\n\t\tfrm.set_value('e_mail_address',result.email);\n\t\tfrm.set_value('pin_code',result.pincode);\n\t\tfrm.set_value('primary_address',result.address)\n\t\tconsole.log(result.address)\n\t}\n})\nfunction extractContactInfo(address) {\n    const phoneRegex = /Phone:\\s*(\\d+)/;\n    const faxRegex = /Fax:\\s*(\\d+)/;\n    const emailRegex = /Email:\\s*([\\w\\.-]+@[\\w\\.-]+)/;\n\n    const phoneMatch = address.match(phoneRegex);\n    const phone = phoneMatch ? phoneMatch[1] : \"\";\n\n    const faxMatch = address.match(faxRegex);\n    const fax = faxMatch ? faxMatch[1] : \"\";\n\n    const emailMatch = address.match(emailRegex);\n    const email = emailMatch ? emailMatch[1] : \"\";\n    \n    address = address.replace(phoneRegex, '');\n    address = address.replace(faxRegex, '');\n    address = address.replace(emailRegex, '');\n    const emptyBrRegex = /<br>\\s*(?=<br>|$)/g;\n    const pincodeRegex = /\\b\\d{6}\\b/g;\n\n    const pincodeMatch = address.match(pincodeRegex);\n    const pincode = pincodeMatch ? pincodeMatch[0] : \"\";\n\n    address = address.replace(pincodeRegex, '');\n    address = address.replace(emptyBrRegex, '');\n    address = address.trim()\n    \n    return { phone, fax, email, address,pincode };\n}",
 "view": "Form"
}